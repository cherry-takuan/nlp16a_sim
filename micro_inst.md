# マイクロ命令定義ファイル

NLP-16Aのシミュレータはマイクロ命令定義ファイルに記述されたシーケンスを実行します。  
読み込みは起動時の一度のみですので，変更時は再度立ち上げなおす必要があります。
## フォーマット  
全体のフォーマットは以下のようになっています。
```
#命令コード
マイクロ命令1
マイクロ命令2
…
…
#命令コード
マイクロ命令1
マイクロ命令2
…
…
```
命令コードは`#`の次に0xから始まる2桁の16進数で記述されます。  
例えば`0x0A`(ADD命令)など。
マイクロ命令は命令コードに対応する命令を構成する小さな命令です。
1命令はこのようなマイクロ命令の列で表されます。
例えばADD命令では以下のように表現されます。
```
;ADD命令
#0x0A
INC IP->IP,ACC
MOV MEM->IR2
;3ワードモード
;ピリオドから始まるサフィックスは条件実行。ここでは3ワード命令時に実行。
INC.3wd IP->IP,ACC
MOV.3wd MEM->IR3
;実行
MOV RA3->ACC
;プレフィックスがF_だとフラグ出力モード
F_ADD RA2->FLAG
ADD RA2->RA1
```
基本的に`[命令] [転送元レジスタ]->[転送先レジスタ]`で構成されています。
命令には条件実行とモード(通常とフラグ出力)，
転送先にはカンマ区切りで複数のレジスタに同じ値が書き込めます。
なお，転送元は一つのみ指定できます。